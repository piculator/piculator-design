# 登录模块设计思路(草稿)

### token 的生成(草稿)

(用户名+密码哈希+ piculator 的 MAC 地址) 用密码（注意：不是用户的密码， 是服务器生成的一个专用密码）进行 AES256 加密

服务器将 最后一次在 piculator 硬件上手动登录的 MAC地址 储存到数据库中

### 自动登录的校验（草稿）

我们生成一枚密钥对

对 token 用私钥进行解密， 

	1. ~~比对登陆日期是否在15天内， 如果否, 则要求用户重新登录~~
	2. 比对 MAC地址 与上次登录是否一致
	3. 比对用户名和密码哈希是否匹配 （如果用户修改了密码， 则不再匹配）

### 手动登录

1. 用户需要输入用户名,密码,验证码,(服务器地址)来进行登录
2. 用户点击登陆时, GUI 程式向服务器发送 POST 请求
3. 登陆后服务器回应 POST 请求生成一个~~有效期为15天~~的 token
4. 客户端把 token 安全保存在本地

### 自动登录

1. 客户端向服务器发送 POST 请求, 携带的数据 : token
2. 服务器校验 token, 如果校验失败, 则要求重新手动登录

### 注册

输入 用户名, 密码, 姓名, 密码重复, 验证码, 密保问题 其他几乎等同手动登录